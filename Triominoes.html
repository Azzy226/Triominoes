<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Triominoe Puzzle</title>
<style>
body { background:#111; color:white; text-align:center; font-family:Arial; }
canvas { background:#222; margin-top:10px; }
button { margin:5px; padding:5px 10px; }
</style>
</head>
<body>

<h2>Triominoes Puzzle (2^n Ã— 2^n) Click to Generate</h2>

<label>Exponent (n): </label>
<input type="number" id="exp" value="4" min="1" max="7">
<button onclick="resetBoard()">Resize or Restart</button>

<br>
<canvas id="board"></canvas>

<script>
let canvas = document.getElementById("board");
let ctx = canvas.getContext("2d");
let size, grid, missing;

function resetBoard(){
    let n = parseInt(document.getElementById("exp").value);
    size = Math.pow(2,n);
    canvas.width = 600;
    canvas.height = 600;
    grid = Array(size).fill().map(()=>Array(size).fill(0));
    missing = null;
    drawGrid();
}

function drawGrid(){
    let cell = canvas.width / size;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(let y=0;y<size;y++){
        for(let x=0;x<size;x++){
            if(grid[y][x]){
                ctx.fillStyle = grid[y][x];
                ctx.fillRect(x*cell,y*cell,cell,cell);
            }
            ctx.strokeStyle="#333";
            ctx.strokeRect(x*cell,y*cell,cell,cell);
        }
    }
}

canvas.addEventListener("click", function(e){
    if(missing) return;
    let rect = canvas.getBoundingClientRect();
    let x = Math.floor((e.clientX - rect.left)/(canvas.width/size));
    let y = Math.floor((e.clientY - rect.top)/(canvas.height/size));
    missing = {x,y};
    grid[y][x] = "black";
    tile(0,0,size,x,y);
    drawGrid();
});

function tile(x,y,n,missX,missY){
    if(n==1) return;
    let half = n/2;
    let midX = x+half;
    let midY = y+half;

    let quad = 0;
    if(missX < midX && missY < midY) quad=0;
    else if(missX >= midX && missY < midY) quad=1;
    else if(missX < midX && missY >= midY) quad=2;
    else quad=3;

    let color = randomColor();

    let centers = [
        {x:midX-1,y:midY-1},
        {x:midX,y:midY-1},
        {x:midX-1,y:midY},
        {x:midX,y:midY}
    ];

    for(let i=0;i<4;i++){
        if(i!==quad){
            let c = centers[i];
            grid[c.y][c.x] = color;
        }
    }

    tile(x,y,half,
        quad===0?missX:midX-1,
        quad===0?missY:midY-1);

    tile(midX,y,half,
        quad===1?missX:midX,
        quad===1?missY:midY-1);

    tile(x,midY,half,
        quad===2?missX:midX-1,
        quad===2?missY:midY);

    tile(midX,midY,half,
        quad===3?missX:midX,
        quad===3?missY:midY);
}

function randomColor(){
    return "hsl(" + Math.random()*360 + ",70%,60%)";
}

resetBoard();
</script>

</body>
</html>
